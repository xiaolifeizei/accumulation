## 统计Nginx接口的访问量

### 拿到access.log文件

1. 准备好access.log文件

   ![image-20220811172300363](https://s1.328888.xyz/2022/08/11/60vGK.png)

2. 上传到测试服务器或虚拟机中（Centos系统）

   ![image-20220811172352281](https://s1.328888.xyz/2022/08/11/64EUm.png)

### 分析文件内容

1. cd到access.log的目录

   ![image-20220811172507512](https://s1.328888.xyz/2022/08/11/64lTk.png)

2. 执行命令

   ```bash
   awk '{print $7}' access.log|sort | uniq -c |sort -n -k 1 -r > test.txt
   ```

   ![image-20220811172637033](https://s1.328888.xyz/2022/08/11/64msE.png)

3. 得到分析文件

   ![image-20220811172715907](https://s1.328888.xyz/2022/08/11/64DpJ.png)

### 导出到本机

1. 将分析结果导到本机中

   ![image-20220811172836827](https://s1.328888.xyz/2022/08/11/64OOw.png)

2. 打开查看结果

   ![image-20220811172934436](https://s1.328888.xyz/2022/08/11/64j9i.png)

### 导入到表格（以WPS为例）

1. 打开wps表格

   ![image-20220811173013278](https://s1.328888.xyz/2022/08/11/64u7g.png)

2. 点击数据->导入数据

   ![image-20220811173122597](https://s1.328888.xyz/2022/08/11/644Lh.png)

3. 选择导入数据

   ![image-20220811173148853](https://s1.328888.xyz/2022/08/11/646Gn.png)

4. 弹出的对话框中选择确定

   ![image-20220811173229259](https://s1.328888.xyz/2022/08/11/64TUs.png)

5. 选择直接打开数据文件->选择数据源->选择刚刚导出来的分析结果

   ![image-20220811173516188](https://s1.328888.xyz/2022/08/11/64hZ0.png)

6. 默认即可，点下一步

   ![image-20220811173623541](https://s1.328888.xyz/2022/08/11/64BTp.png)

7. 默认即可，下一步

   ![image-20220811173656289](https://s1.328888.xyz/2022/08/11/64bso.png)

8. 分割符号选择空格，点击下一步

   ![image-20220811173749982](https://s1.328888.xyz/2022/08/11/64wqF.png)

9. 点击完成

   ![image-20220811173819707](https://s1.328888.xyz/2022/08/11/64COS.png)

10. 成功导入

![image-20220811173845713](https://s1.328888.xyz/2022/08/11/64aK5.png)

### 求和

![image-20220811174005542](https://s1.328888.xyz/2022/08/11/64kQN.png)

### 计算访问比例

1. 计算公式

   ![image-20220811174139744](https://s1.328888.xyz/2022/08/11/645Ly.png)

2. 拉动计算全部

![image-20220811174151855](https://s1.328888.xyz/2022/08/11/649CC.png)
